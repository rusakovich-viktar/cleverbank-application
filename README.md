# cleverbank-application

Разработано консольное приложение для Clever-Bank.

Основные сущности:
- Банк
- Счёт
- Пользователь
- Транзакция
- 
Стек:
- Java 17
- Gradle
- PostgreSQL
- JDBC
- Lombok
- Реализовано логирование
- Реализована миграция БД
  
 Объём данных:
1. Банков ≥ 5
2. Пользователей ≥ 20
3. Счетов ≥ 40
4. Также у пользователей могут быть счета в разных банках
______________
  1. Реализованы операции пополнения и снятия средств со счета
  2. Реализована возможность перевода средств другому клиенту Clever-Bank и клиенту другого банка. При переводе средств в другой банк используется одна транзакция.
  3. Регулярно, по расписанию (раз в полминуты), проверяется, нужно ли начислять проценты (1% - значение подставляется из конфигурационного файла) на остаток
счета в конце месяца. Асинхронная реализация.
  4. После каждой операции формируется чек и сохраняется в корне проекта.
  5. Код содержит документацию в формате JavaDoc, соблюдается java code conventions
  6. Соблюдаются принципы ООП и SOLID.
  7. Таблицы в базе данных соответствуют третьей нормальной форме (3 НФ)
_______________________________
ВАЖНО: - сейчас проект можно запустить только в среде разработки(причины ниже), напр. IDEA:

1. В src/main/resources/property.yml выставить параметры своей базы данных, заменить мои значения своими (не удалять кавычки)
```bash
  jdbcUrl: "тут ваш URL"
  username: "логин"
  password: "пароль"
```
 
2. вызвать в командной строке IDEA для применения миграций FlyWay (Файлы с миграциями находятся в папке resources/db/migration) или применить их вручную
```bash
gradle flywayMigrate
```
или запустить GRADLE-flyway-flywayMigrate. 

3. Запустить проект
```bash
gradle run
```
или через Main класс

```bash
4. залогиниться, например qqq www; admin admin; test test; user1 user1;
```



_________________________________

Имеющиеся проблемы (при запуске из среды разработки и при разработке таких проблем нет, обнаружились при сборке приложения, добавлении миграций и упаковке в докер):

1. **запуск в докере** (приложение запускается в контейнере и уходит в бесконечный цикл при попытке ввести значение или другая крайность NoSuchElementException) :
Заменить порт базы в настройках на порт из докерфайла и docker compose up.

2. **Запуск из консоли** (приложение также запускается в бесконечный цикл или крашится с ошибкой при старте NoSuchElementException)
docker build + docker run  или ./gradlew runWithMigration для инициализации базы и запуска.




